{% set name = "awkward" %}
{% set version = "0.8.14" %}
{% set build_number = 0 %}

package:
  name: {{ name }}_and_variants
  version: {{ version }}

source:
  - url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
    sha256: 28c8b79fee51b9b3a0281f8ab9d1f6958d3bf5b6a8b15e5884b4ad637b6bc8d5
    folder: {{ name }}
  - url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}-numba/{{ name }}-numba-{{ version }}.tar.gz
    sha256: 0c5f813190a7ceae5a6a229c8cb7a574b774609215f886fafd271ecacfb22638
    folder: {{ name }}-numba

build:
  number: {{ build_number }}
  noarch: python

# Specifying `python` as a top-level build requirements to force conda to
# render the recipe correctly
requirements:
  build:
    - python

outputs:
  - name: {{ name }}
    version: {{ version }}
    build:
      number: {{ build_number }}
      script: "{{ PYTHON }} -m pip install {{ name }} --no-deps -vv"
      noarch: python
    requirements:
      build:
      host:
        - python
        - pip
        - pytest-runner
      run:
        - python
        - numpy >=1.13.1
    test:
      imports:
        - awkward

  - name: {{ name }}-numba
    version: {{ version }}
    build:
      number: {{ build_number }}
      script: "{{ PYTHON }} -m pip install {{ name }}-numba --no-deps -vv"
      noarch: python
    requirements:
      build:
      host:
        - python
        - pip
        - pytest-runner
      run:
        - python
        - numba
        - awkward =={{ version }}
    test:
      imports:
        - awkward.numba

about:
  home: https://github.com/scikit-hep/{{ name }}
  license: BSD-3-Clause
  license_family: BSD
  license_file: {{ name }}/LICENSE
  summary: 'Manipulate arrays of complex data structures as easily as Numpy.'
  dev_url: https://github.com/scikit-hep/{{ name }}

extra:
  recipe-maintainers:
    - chrisburr
    - jpivarski
